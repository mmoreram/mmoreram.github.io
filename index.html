
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Because yes</title>
  <meta name="author" content="Marc Morera">

  
  <meta name="description" content="BullshitLess Driven Development Spanish version This is a letter for you, small grasshopper programmer, that yesterday you
discovered that an if is &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <!-- og:meta -->
  <meta property="og:title" content="" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://mmoreram.com/" />
  

  <link rel="canonical" href="http://mmoreram.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Because yes" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=Raleway:100" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Lora:400,400italic,700,700italic|Istok+Web:400,400italic,700,700italic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-41917921-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
  <div id="header-container">
    <div id="header">
      <div class="wrapper">
        <header role="banner"><hgroup>
  <h1><a href="/">Because yes</a></h1>
</hgroup>

</header>
        <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mmoreram.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
      </div>
    </div>
  </div>
  <div id="body"   >
    <div id="main">
      <div id="content">
	<div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/16/bldd-a-dd-to-dominate-them-all/">BLDD, a DD to Dominate Them All</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-02-16T11:23:00+01:00" pubdate data-updated="true">Feb 16<span>th</span>, 2017</time>
        
         | <a href="/blog/2017/02/16/bldd-a-dd-to-dominate-them-all/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>BullshitLess Driven Development</strong></p>

<p><a href="/blog/2017/01/26/bldd-un-dd-para-dominarlos-a-todos/">Spanish version</a></p>

<p>This is a letter for you, small grasshopper programmer, that yesterday you
discovered that an <em>if</em> is an instruction so awesome that it allows that you
could run a small piece of code with a predetermined condition, and that
tomorrow you will discover, very probably, what a recursive function is, what an
object is and that Singleton is a design pattern, or at least this they say over
there&hellip;</p>

<p>This is a letter for you, so that you remember it in the hard moments of your
life as a programmer and so that you look for a starting point in this wonderful
professional current, full of green phosphorite letters with meaning of victory,
of unpaid and ungrateful overtime and of undecipherable bugs, more hidden than
the dignity of the voters of Donald Trump.</p>

<p>Smile at life, you lucky man. Praised is your future!</p>

<p>And the fact is that today, here, I want to tell you some situations that,
surely, sooner or later, and more sooner than later, you will live in some of
your future exploits. In these situations there are monsters, mortal pitfalls
and up to lethal weapons. There are unconnected religions, double morals and the
worst thing of all, bullshits as to feed half the entire Congo and to remain for
a Christmas dinner where the whole Sierra Leone is invited. Free Moët for all
included.</p>

<p>Let&rsquo;s start with some sentences of the guild&hellip;</p>

<h3>This is bad.</h3>

<p>Yes, my friend.</p>

<p>Although you do not believe it, quite all that you&rsquo;ll do in your life will be a
real shit for some. It does not matter that your experience is just one day
programming, or that you have it often inevitable pressure of those who pay your
salary, or simply you cannot do it better. Never mind. Do what you do, it will
smell in a disgusting way you can not still imagine.</p>

<p>And possibly it will be. Possibly your creation will be poor and with many
mistakes, but we are lucky of that surrounded as we are surrounded with
constructive and charitable souls, where very few times one <em>“Is bad”</em> will come
accompanied from one <em>“If you want I can sit next to you and we can make it much
better”</em>.</p>

<p>Do not dazzle you, you are not alone.</p>

<p>We are the society of <em>“You don&rsquo;t know”</em> and not the one of <em>“I Believe that it
can be improved”</em>, and we are so complex with our shits, that we need to put at
the beginning of our phrases one <strong>&ldquo;IMHO&rdquo;</strong> because, otherwise, the fact that we
think that every single line of code done by other hands far from ours is
garbage ipso facto, can be too evident.</p>

<p>The most polite have decided to mask all this reality with a great and lovely
word, and dear reader&hellip; save it properly in your untrained memory.</p>

<p>Legacy Code.</p>

<h3>These of product&hellip;</h3>

<p>Other one of the sentences that is so common among our cloud of egos is <em>“these
of product, how heavy they are with their useless pixels”</em> or seemed, normally
with burlesque and challenging tone.</p>

<p>Yes, my friend, a classic topic between partners of department, very habitual in
any company where some people take care, not only about how amazing is the
technical part, but how good are sales. Not all the companies are so modern and
liberal as to ignore sales metrics and final user inputs.</p>

<p>Ah&hellip; these of product that want to fuck our lives with stupid things like
pixels for our landing pages, with seemingly useless changes in the web, or with
integrations with payment methods or shipping providers. As soon as you meet
these miserable, please, spit in their faces, because of their disrespectful
behaviour toward us, the programmers, whom we do the projects in the company
we&rsquo;re working in with new technologies, even unknown technologies, just because
they are cool and freaking trending, that we decide that the new project in
the company will be designed with 378 different layers, each more useless, just
because some nobody with hat and whose fans have tattooed the Clean Code book in
its soft buttocks, said someday that it was the last thing in being hipster,
even without knowing the real goal of our project and its timings.
To us, that we do a form in 5 days because we want it to be compatible with the
GameBoy Advance, with the small screen of the microwave and with the thermostat
of our heater. To us, that nobody prevents us from being the whole day with the
nose hooked on that on-line groups, more likely an ego orgy than a place where
to learn something.</p>

<p>To us that we are so responsible.</p>

<p>I will tell you a secret. An undertone. Don&rsquo;t let anyone hear us.</p>

<p>If anyone knew each of the shits that we do in this paid work, or if they knew
each of the erroneous architectural decisions that we take for the mere fact of
wanting to be the cooler, we all would be dismissed. All of us.</p>

<p>Although I suppose that we prefer to say “These of product&hellip;”, to show off that
we not only can do a <em>foreach</em>, but also we can do the work of half a company,
and continue with our lives with the head quite high, leaving a disgusting track
of Legacy Code in our backs.</p>

<h3>In my company we do&hellip;</h3>

<p>This is a brilliant pearl, the sapphire of the phrases, although to find it you
will have to strain a little bit and leave your house in order to let the light
of the sun impact your smooth complexion, and start relating to other persons of
other companies.</p>

<p><strong>Be courage!</strong>.</p>

<p>And the fact is that you will discover that all the other companies use the last
of the last. Good shit in their stack of technologies and hard drugs in its last
incorporation (when they do not have authentic machines in its backend
department, they have an ex-facebook in its system department or a super crack
as CTO come from the far elvers mountains).</p>

<p>All the companies are equipped technologically extremely well, with a workforce
build with the best of the best. You will understand this in the future, when
you start working in a new company. You&rsquo;ll never, ever, have the printout of
having begun being employed at a slaughter full of corpses, rotting during the
last 10 years.</p>

<p>Remember&hellip; never!</p>

<p>And the fact is that, my friend, it seems that having that all our code is a
shit, and that those of product are the whole day between a <em>&ldquo;put this pixel
here&rdquo;</em> and a <em>&ldquo;put this banner there&rdquo;</em>, it turns out that we do not have time to
make our work properly. But remember! it is not because we are all authentic
bunglers in most cases, not at all. It is because we&rsquo;ve had not time.</p>

<h3>But Uncle Bob says that&hellip;</h3>

<p>Rapid and precise.</p>

<ul>
<li>Is Uncle Bob here?</li>
<li>Does Uncle Bob know the project?</li>
<li>No, am I right?</li>
<li>Then I don&rsquo;t give a shit what Uncle Bob says.</li>
</ul>


<p>End of the discussion.</p>

<h2>The key of everything, BLDD</h2>

<p>Said this, you will see that the world is an inhospitable place, full of people
with few desires of helping you and too much fucking you all and seeing you
sinking. But nevertheless you have to do a <em>switch</em> because, given the
circumstances, you can&rsquo;t do it better, or you have to do a project in a couple
of days and unfortunately you cannot make it compatible with the handlebar of
your bike.</p>

<p>I present to you, humbly, the BLDD, abbreviation of BullshitLess-Driven
Development (another thing that you need to learn is that, here, we write
everything with abbreviations, in English although both speakers are from
Albacete and that you must put between phrase and phrase the word <em>Trade-off</em>.
If you do not do this, you will not be accepted by the exclusive circles).</p>

<p>The BLDD is a very simple practice, based on ignoring all those frequencies
that are broadcasting bullshit. Exactly the same as what is commonly known as
sending to fuck off, but with a modern name and in a way that can make us feel
cooler and much more modern.</p>

<blockquote><p>It is commonly recommended to make tests first and then implement BLDD.
Otherwise, you&rsquo;re shit.</p></blockquote>

<p>This methodology counters almost all other strategies ending with DD, and is
applicable almost in all cases.</p>

<ul>
<li>If someone tells you that your project should have tests first&hellip; BLDD</li>
<li>If someone tells you that you&rsquo;re too coupled to the framework, even if you&rsquo;re
only trying to do you CV? BLDD</li>
<li>If someone tells you that your code is shit and that can be redone properly
in DDD? <del>in that case, break his neck</del> BLDD</li>
</ul>


<p>As you can see, it works like Swiss knife. The good part of this practice is
that be sure that anyone, any time, will tell you how you should use it and
implement it. An endless amount of formulas, each one more incredible, can be
part of your executions when implementing BLDD.</p>

<h2>Some ending advices</h2>

<p>To end this cookbook of the good developer, a small list of ideas and advices
for your body&hellip;</p>

<ul>
<li>IMHO, if any time you make a public presentation in a conference, take with
you on stage the red DDD book. As soon as you see anyone in the first row
sleeping or playing with his mobile, please, throw him the book with as much
emphasis as you can. It will hurt so much. If he continues sleeping, you still
have other colours&hellip;</li>
<li>IMHO, a conversation ends when someone tells the word <em>Annotation</em></li>
<li>IMHO, to make friends on Twitter you only have to say &ldquo;TDD is dead&rdquo;. To make
enemies, exactly the same.</li>
<li>IMHO, your project tests is like the unemployment. The important is the
coverage you can tell other people, not the real quality of the cases.</li>
<li>IMHO, in Barcelona, the developers are used to changing from one company to
another one once per year. At 40 years, your wage will be around 120.000
and you will be a fucking god in 20 languages, including assembler. You will
still be extremely stupid and lazy when defining variable names and all your
code comments will be in your native language</li>
<li>IMHO, nowadays, Event Sourcing is super mainstream. Yeah, exactly, this
super useful practice in all our sector. So I calculate that in about 5 years,
in some companies you will work in, you will find a set of intractable,
incomprehensible and undocumented classes and packages, fruit of this fashion.
You&rsquo;re welcome.</li>
</ul>


<h2>Conclusions</h2>

<p>I will finally tell you that good luck. Try to learn as much as you can, read as
much as you can and teach as much as you can, but never let anyone tell you how
to do your stuff (unless someone tells you to not use Prestashop. In that case,
please, follow the advice blindly). Have enough criterion to accept that many of
the technologies, architectures and practices you will discover and listen in
conferences, in your friends talks or in Twitter threads, are not useful at all
in your projects.</p>

<p>Work hard, follow your dreams and remember that you have to buy a lot of
technical books, and as soon as you receive them, you need to take a picture and
publish on Twitter something like&hellip; <em>&ldquo;My new plan for the weekend&rdquo;</em>.</p>

<p>For everything else, BLDD.</p>

<p><img src="/images/bldd.jpg"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/02/04/el-peligro-de-hablar-espanol-en-catalunya/">El Peligro De Hablar Español en Catalunya</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-02-04T12:24:00+01:00" pubdate data-updated="true">Feb 4<span>th</span>, 2017</time>
        
         | <a href="/blog/2017/02/04/el-peligro-de-hablar-espanol-en-catalunya/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Odiado español.</p>

<p>Es muy posible que tras el
<a href="https://twitter.com/rosadiezglez/status/827236546491273216">sensacionalista Tweet</a>
de Rosa Díez, una mujer profundamente admirada y seguida por todo el pueblo
español, te hayas quedado con ganas de más. Recordemos que la señora Díez
reaccionaba de una forma muy natural en las redes sociales tras leer un artículo
de un medio de comunicación titulado &ldquo;El peligro de hablar en español en Estados
Unidos&rdquo;.</p>

<p>Para los que aún desconocéis dichos hechos, decir que ella pedía a gritos un
artículo semejante en relación con la persecución que sufre la gente en
Catalunya por hablar en español. Sí, has leído bien. Catalunya, Español,
Persecución.</p>

<p>Pues bien, les comentaré durante unas cuantas líneas de qué trata esta
persecución, cuales son algunos de los casos más delirantes ocurridos en estas
tierras colonizadas por los catalano-parlantes y les daré algunos consejos para
aquellos que decidan que Catalunya pueda ser un objetivo para su próximo safari
en vacaciones.</p>

<p>Agárrense bien al sillón, valientes curiosos, porque todo lo que lea a
continuación puede ser motivo de pérdida de conocimiento para pequeños y
mayores, y objeto de traumas perpetuos para los más sensibles.</p>

<p>Empiezo.</p>

<h3>Antiguamente</h3>

<p>Una vez conocí una persona llamada Juan. Juan era de familia emigrante durante
la época de la transición, y tras partir con sus padres de un pueblecillo
pequeño en el norte de Extremadura, llegaron a tierras inhóspitas en el extra
radio de Barcelona.</p>

<p>Por aquel entonces, la llamada ciudad de Badalona era el centro cultural de
Catalunya. Todo el mundo hablaba catalán antiguo, forjado en las oscuras cuevas
de los pueblos unidos del norte, y cualquier humano andante con habladurías que
no fueran en el idioma ario era objeto de persecución, dilapidación y extorsión
por parte de los integrantes de aquella cultura pseudoradical.</p>

<p>Todo cuanto Juan y su familia conoció en tierras lejanas fue miedo y soledad, y
aunque sus pensamientos permanecían permanentemente en su amado pueblo, ya
dejado atrás, su futuro les llamaba susurrante y provocador.</p>

<p><em>&ldquo;Veniu, estimats conciutadans. Integreu-vos i parleu en català&rdquo;</em></p>

<p><strong>Venid, amados conciudadanos. Integraos y hablad en catalán</strong>, les decía el
destino, amparado con el fino velo del desprecio hacia aquellos pobres humanos
diferentes y extraños. Ellos, asustados por aquella voz incomprensible de
palabras hechizadas, decidieron taparse los oídos por el miedo a volverse locos
y dementes. ¿Hasta cuándo podrían soportar esta situación? ¿Qué les deparaba la
vida?</p>

<p>Juan y su familia se desvanecieron en su oscura morada de Badalona, y sus
cuerpos yacieron escondidos e inevitablemente ignorados, como todo aquel
inconsciente que se atrevió a cruzar poniente sin hablar la lengua envenenada
del mismísimo señor de las tinieblas.</p>

<p>Lo recuerdo con cariño, y es que fueron buenos tiempos.</p>

<h3>Actualmente</h3>

<p>Esta bien podría ser una noticia de &ldquo;el país&rdquo;, y a usted, querido lector, no le
extrañaría demasiado descubrir una vez más que, en Catalunya, los seres
vivientes somos malvados con aquellos con los que diferimos en raza, lengua e
identidad.</p>

<p>Yo soy ciudadano de Badalona.</p>

<p>Hoy en día aún puedo oler el olor podrido de los cuerpos de aquellos que
perecieron en sus casas por miedo al rechazo de los catalanes de antaño. Y es
que antes era distinto. La gente proveniente de tierras lejanas era
inevitablemente valiente y no se doblegaba ante la inexistente tolerancia de los
indígenas locales. Se escondían y hablaban en silencio, en la oscuridad de las
velas, vigilantes. Ahora todo ha cambiado. Ahora no ofrecemos ningún tipo de
opción a los que se atreven a profanar nuestras ciudades y pueblos. Ahora uno ya
no puede escapar de nuestras garras perturbadoras, y todo el mundo es llamado a
la obediencia incondicional.</p>

<p>Ahora todo el mundo <strong>debe</strong> hablar catalán, y no hay sitio donde esconderse.
No lo hay.</p>

<p>Y lo digo con orgullo, nos sentimos poderosos y extremadamente superiores. Cada
palabra pronunciada de forma incorrecta nos repugna y castigamos aquellos que
desobedecen nuestra voluntad.</p>

<p>Y tu, nos deberías temer. Odiar. Admirar.</p>

<h3>Algunos Consejos</h3>

<p>Nuestros líderes, a modo de muestra de entendimiento con los pueblos
hispano-parlantes, han acordado con el estado Español unas visitas guiadas por
nuestras tierras. Algo parecido a un safari por tierras africanas, pero en lugar
de leones, tenemos a abuelos de Girona con barretina, en lugar de cebras,
castellers haciendo un 3 de 10 con forro y manilla y en lugar de ñus, tenemos a
chavales rapeando el diccionario de Pompeu Fabra con rimas asonantes.</p>

<p>Algunos consejos para los valientes que quieran visitar nuestra cultura.</p>

<ul>
<li>Recuerda, hablad bajito. Somos radicales e intolerantes por lo que toda
muestra de cultura que no sea la nuestra será despreciada, golpeada y
exterminada de forma instantánea.</li>
<li>Tal vez veas en algún momento una caja encima de una mesa, con una raja en su
parte superior y gente haciendo cola tras ella. Te informamos que la gente está
injuriando y profanando nuestros más sagrados principios constitucionales. Te
invitamos a que les lances piedras y nos avises. Nosotros procederemos a precintar
el recinto y a juzgar a los organizadores. Recuerda que somos <strong>MUY</strong> radicales.</li>
<li>Hay unas montañas llamadas Montserrat. Son sagradas y alguien que no conoce
nuestro idioma no puede acercarse a menos de 50km. Solo se puede acceder andando
y en los alrededores hay perros husmeando en busca de infieles. No tenemos
piedad alguna.</li>
<li>Una vez al año salimos con nuestras banderas y canciones a hacer apología al
terrorismo. Tiendas y contenedores son quemados por familias enteras, mientras
los más pequeños son entrenados para la <em>kale borroka</em> (palabras prestadas por
nuestros hermanos, el pueblo en las montañas, los Vascos).</li>
<li>Si véis a alguien que dice &ldquo;Goita&rdquo;, salid corriendo. Es posible que sea uno de
nuestros pueblerinos. Se conoce que son los más radicales, suelen ir con una hoz
en plan Muerte, y se toman la justícia y la venganza por cuenta propia.</li>
<li>No estéis en nuestras tierras más de 3 o 4 dias, o podríais acostumbraros, y
esto es algo que ni vosotros ni nosotros queremos.</li>
<li>Los niños son entrenados en las escuelas para no entender el castellano, por
lo que no les habléis, o podrían reaccionar muy violentamente.</li>
</ul>


<p>Para que luego digáis que no os avisamos alto y claro&hellip;</p>

<p>A usted, estimada Rosa Díaz, gracias por dar conciencia a sus ciudadanos. Su
trabajo nos ayuda a todos a estar alerta de nuestra actualidad más verosímil, a
que la gente que la lee nos odie y desprecie (aún) más, y con razones. En
resúmen, no hace más que contribuir a la construcción de una sociedad con
criterio, recursos y conscientes de su propia realidad.</p>

<p>Desde mi más profundo odio de catalán, gracias.</p>

<p>PD: Si comentáis, que sea en catalán. Sino, tendré que utilizar a mis esclavos
traductores.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/01/26/bldd-un-dd-para-dominarlos-a-todos/">BLDD, Un DD Para Dominarlos a Todos</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-01-26T19:54:00+01:00" pubdate data-updated="true">Jan 26<span>th</span>, 2017</time>
        
         | <a href="/blog/2017/01/26/bldd-un-dd-para-dominarlos-a-todos/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>BullshitLess Driven Development</strong></p>

<p><a href="/blog/2017/02/16/bldd-a-dd-to-dominate-them-all/">English version</a></p>

<p>Esta es una carta para tí, pequeño saltamontes programador, que ayer descubriste
que un <em>if</em> es una instrucción muy molona que hace que puedas ejecutar un
pequeño trozo de código según una condición predeterminada, y que mañana
descubrirás muy probablemente qué es una función recursiva, qué es un objeto
y que Singleton es un patrón de diseño, o al menos esto dicen por allí&hellip;</p>

<p>Esta es una carta para tí, para que te acuerdes de ella en los momentos duros de
tu vida como programador y para que busques un punto de partida en esta
maravillosa corriente profesional, llena de letras verdes fosforito con
significado de victoria, de horas extras impagadas y desagradecidas y de bugs
indescifrables, más escondidos que la dignidad de los votantes del PP.</p>

<p>Sonríele a la vida, afortunado. Alabado sea tu futuro!</p>

<p>Y es que hoy, aquí, te quiero contar algunas situaciones que, seguramente, tarde
o temprano, y más temprano que tarde, vivirás en alguna de tus futuras hazañas.
En estas situaciones hay monstruos, trampas mortales y hasta armas letales. Hay
religiones inconexas, dobles morales y lo peor de todo, gilipolleces como para
alimentar a medio Congo y sobrar para una cena de navidad donde toda Sierra
Leona esté invitada. Barra libre de Moët incluida.</p>

<p>Empecemos con algunas frasecillas del gremio&hellip;</p>

<h3>Esto está mal</h3>

<p>Sí, amigo.</p>

<p>Aunque no lo creas, todo cuanto hagas en tu vida será una verdadera mierda para
algunos. Da igual que lleves un día programando, o que tengas la muchas veces
inevitable presión de aquellos que te pagan el sueldo, o simplemente que no lo
sepas hacer mejor. No importa. Hagas lo que hagas, apestará a perro agusanado.</p>

<p>Y posiblemente lo esté. Posiblemente tu creación será pobre y con muchos fallos,
pero tenemos la suerte de que rodeados como estamos rodeados de almas
constructivas y caritativas, muy pocas veces un <em>&ldquo;Está mal&rdquo;</em> vendrá acompañado
de un <em>&ldquo;Si quieres me siento a tu lado y miramos como puede estar mejor&rdquo;</em>.</p>

<p>No te ofusques, no estás solo.</p>

<p>Somos la sociedad del <em>&ldquo;Tu no sabes&rdquo;</em> y no la del <em>&ldquo;Creo que puede mejorarse&rdquo;</em>,
y estamos tan acomplejados con nuestras mierdas, que necesitamos poner al
principio de nuestras frases un <strong>&ldquo;IMHO&rdquo;</strong> porque sino, puede que se note
demasiado que creemos que toda linea de código que no sale de nuestros muñones
es basura ipso facto.</p>

<p>Los más educados han decidido enmascarar toda esta realidad con una palabreja
de lo más interesante, y querido lector&hellip; grábatela en tu memoria desentrenada.</p>

<p>Legacy Code.</p>

<h3>Estos de producto&hellip;</h3>

<p>Otra de las frasecillas que corren por la autopista de lo insultante es <em>&ldquo;estos
de producto, que pesaos con los píxeles&rdquo;</em> o parecidas, normalmente con tono
burlesco y desafiante.</p>

<p>Sí, amigo, un clásico entre compañeros de departamento, muy habituales en
cualquier empresa que se precie donde cuiden un poco sus ventas. No todas las
empresas son tan modernas y liberales como para dejar a su libre albedrío
métricas de ventas y ingresos&hellip;</p>

<p>Ah&hellip; estos de producto que quieren jodernos la vida con chorradas como píxeles
para los frontales, con cambios en la web aparentemente inútiles, o con
integraciones con métodos de pago o de transporte. Cuando veas a toda esta
gentuza, escúpeles en la cara, porque no nos respetan, a nosotros, a los
programadores, a los que hacemos los proyectos que nos piden con tecnologías que
desconocemos porque son guasonas y molonas, a los que decidimos que el nuevo
proyecto de la empresa se hará con 378 capas distintas, a cada cual más inútil,
porque un tal Pepito de los Palotes con sombrero y cuyos fans llevaban el libro
de Clean Code tatuado en sus suaves nalgas, dijo que era lo último en
Hipsterismo, a pesar de no saber qué estamos haciendo y el porqué lo estamos
haciendo. A nosotros que hacemos un formulario en 5 días porque queremos que sea
compatible con la GameBoy advance, con la pantallita del microondas y con el
termostato de nuestra estufa. A nosotros que nadie nos impide estar todo el día
con la nariz enganchada a los grupos online con ciertos parecidos a bacanales.</p>

<p>A nosotros que somos tan responsables.</p>

<p>Te diré un secreto.
En voz bajita, que no nos oiga nadie.</p>

<p>Si ellos supieran cada una de las cagadas que hacemos en el código que nos pagan
por hacer, o si supieran cada una de las decisiones arquitecturales erróneas que
tomamos por el mero hecho de querer molar cantidad, estaríamos todos despedidos.
Todos.</p>

<p>Aunque supongo que preferimos decir &ldquo;Estos de producto&hellip;&rdquo;, aparentar que no tan
solo sabemos hacer un <em>foreach</em>, sino que también sabemos hacer el trabajo de
media compañía, y seguir con nuestras vidas con la cabeza bien alta, dejando un
rastro de Legacy Code, cual rastro en nuestras espaldas.</p>

<h3>En mi empresa hacemos&hellip;</h3>

<p>Esta es perla brillante, el zafiro de las frases, aunque para encontrarla
tendrás que esforzarte un poco y dejar que la luz del sol alumbre tu tersa tez
para salir de casa y relacionarte con otras personas de otras empresas.</p>

<p><strong>Ánimo.</strong></p>

<p>Y es que descubrirás que todas las otras empresas utilizan lo last de lo last.
Mierda de la buena en su stack de tecnologías y droga de la dura en sus últimas
incorporaciones (cuando no tienen un auténtico máquina en su departamento de
backend, tienen un exfacebook en su departamento de sistemas o un súper crack
como CTO llegado de las montañas de los elfos).</p>

<p>Todas las empresas están tan bien dotadas tecnológicamente y con unas plantillas
tan extremadamente potentes, que cuando entres en una empresa nueva, nunca,
repito, nunca, jamás de los jamases, tendrás la impresión de haber empezado a
trabajar en una escabechina llena de cadáveres, pudriéndose durante los últimos
10 años.</p>

<p>Nunca, en absoluto.</p>

<p>Y es que amigo, parece que entre que todo nuestro código es una mierda, y los
de producto están todo el día que si ponme este píxel, y ponme este banner,
resulta que no tenemos tiempo de hacerlo bien. Pero eh! no es porque seamos
todos unos auténticos chapuzas en la mayoría de los casos, no no, es porque no
hemos tenido <em>tiempo</em>.</p>

<h3>Es que resulta que Uncle Bob dice que&hellip;</h3>

<p>Rápido y preciso.</p>

<ul>
<li>¿Está aquí Uncle Bob?</li>
<li>¿Conoce Uncle Bob el proyecto?</li>
<li>No, ¿verdad?</li>
<li>Pues me importa una mierda lo que diga el tío Bob.</li>
</ul>


<p>Fin de la discusión.</p>

<h2>La clave de todo, BLDD</h2>

<p>Dicho esto, verás que el mundo es un lugar inhóspito, lleno de gente con pocas
ganas de ayudarte y con muchas de joderte y hundirte, pero aún así tu tienes que
hacer un <em>switch</em> porque dadas las circunstancias que sean no puedes o no sabes
hacerlo mejor, o tienes que hacer un proyecto con pocos días y por desgracia no
puedes hacerlo compatible con el manillar de tu bici.</p>

<p>Te presento, humildemente, el <strong>BLDD</strong>, abreviación de <strong>BullshitLess-Driven
Development</strong> (otra cosa que tienes que aprender es que aquí escribimos todos
con abreviaciones, en inglés aunque estén hablando dos de Albacete, y que debes
poner entre frase y frase la palabra <strong>Trade-off</strong>. Si no haces esto, no serás
aceptado por los grandes círculos).</p>

<p>El BLDD es una práctica muy sencilla, basada en el ignorar todas aquellas
frecuencias que emitan gilipolleces en directo. Lo que vendría a ser el clásico
mandar a esnifar plastidecor picado de toda la vida, pero con un nombre moderno
y casual, de estos que nos hacen sentir a nosotros muy top.</p>

<blockquote><p>Se recomienda primero hacer los tests, y luego implementar el BLDD. Si no lo
haces así, eres un mierda.</p></blockquote>

<p>Esta metodología contrarresta todas las demás que terminan en DD y es aplicable
la mayor parte del tiempo útil de tu vida.</p>

<ul>
<li>Que alguien te dice que tu proyecto debería tener tests primero? BLDD.</li>
<li>Que alguien te dice que estás muy acoplado a tu FW y solo quieres hacer tu
currículum? BLDD</li>
<li>Que alguien te dice que tu código es mierda y que él lo hace mejor en DDD?
<del>a este le rompes la boca</del> BLDD</li>
</ul>


<p>Ya ves, funciona cual navaja suiza. Lo bueno de esta práctica es que ten claro
que nunca nadie va a decir como debes practicarla. Un sinfín de fórmulas, cada
cual más original, pueden formar parte del elenco de posibilidades a la hora de
ejecutar el BLDD.</p>

<h2>Algunos consejos para terminar</h2>

<p>Para finalizar mi cookbook del buen programador, un escueto listado de ideas y
miniconsejos de jardinería para que vayas pensando.</p>

<ul>
<li>IMHO, si algún día haces una presentación en público, súbete el libro rojo de
DDD contigo, y al que se ponga en la primera fila y se ponga a mirar el móvil o
a dormirse, se lo tiras. Le va a doler. Mucho. Y si sigue durmiendo, recuerda
que aún tienes de otros colores&hellip;</li>
<li>IMHO, una conversación se acaba cuando alguien dice la palabra <em>Annotation</em>.</li>
<li>IMHO, para tener amigos en Twitter solo tienes que decir &ldquo;TDD is dead&rdquo;. Para
tener haters, también.</li>
<li>IMHO, los tests en tus proyectos es como el paro en españa. Lo importante
es el coverage, no la calidad de los cases.</li>
<li>IMHO, en Barcelona, de media los developers solemos cambiar de trabajo una vez
al año, con subida salarial de forma recurrente. A los 40 años estarás cobrando
120.000 euros y serás un fucking god en 20 lenguajes distintos. Seguirás sin
poner bien el puto nombre a una variable y pondrás los comentarios en español.</li>
<li>IMHO, a día de hoy, en enero de 2017 es mainstream el Event Sourcing. Si, si, está
práctica tan jodidamente útil en todo nuestro sector. Así que calculo que
aproximadamente en 2021, en alguna de las empresas en las que trabajes, te
encontrarás un conjunto de código intratable, ilegible y profundamente
indocumentado fruto de esta modilla. De nada.</li>
</ul>


<h2>Conclusiones</h2>

<p>Finalmente decirte que mucha suerte, que aprendas mucho, que leas mucho, que
preguntes y enseñes mucho, pero que nunca dejes que nadie te diga como tienes
que hacer las cosas (menos si alguien te aconseja que no utilizes Prestashop. En
este caso, hazle caso). Ten el suficiente criterio como para aceptar que muchas
de las formas de trabajar que escucharás en conferencias, charlas de amiguetes o
en hilos de Twitter ni tan solo sirven para tu proyecto.</p>

<p>Trabaja duro, persigue tus objetivos y acuérdate de comprarte muchos libros
técnicos, de sacar una foto cada vez que te compres uno y publicar en Twitter
algo como <em>&ldquo;Ya tengo plan para este fin de semana&rdquo;</em>.</p>

<p>Para todo lo demás, BLDD.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/03/03/symfony-catalunya/">Symfony Catalunya</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-03-03T17:00:00+01:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2016</time>
        
         | <a href="/blog/2016/03/03/symfony-catalunya/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Imagine yourself in front of the Barcelona&rsquo;s beach in July. It sounds good,
right? Then, continue imagining yourself with a great Symfony environment, with
a very cold beer, amazing people and even better topics to talk about.</p>

<p>Isn&rsquo;t it the best plan ever?</p>

<p>Well, if you feel that you need it, then you should continue reading this
post&hellip;</p>

<p>I&rsquo;m very very pleased to tell you that this plan is going to happen this summer.
The Symfony Barcelona Association is working very hard on this first edition of
<a href="http://symfony.cat">Symfony Catalunya</a>, an international Symfony event placed
in our city. This event is 100% in english and is going to be very focused on
how Symfony can help us in our day by day and in our jobs.</p>

<p><a href="http://symfony.cat"><img src="http://symfony.cat/images/symfony-catalunya-poster.png" alt="Symfony Catalunya 2016" /></a></p>

<p>What does it really mean? Let me explain you properly:</p>

<ul>
<li><strong>0 smoke</strong>. This doesn&rsquo;t mean that we will not talk about new concepts, like
React for example, but everything will be constructive and focused on your next
day work.</li>
<li><strong>New talks</strong>. Don&rsquo;t you feel that all events are populated with same talks year
after year? In this event you will find <strong>only</strong> new talks.</li>
<li><strong>Amazing speakers</strong>. Speakers are selected because their communication skills.
The speaker quality is as important as the talk quality, don&rsquo;t you think?</li>
<li>Community to Community. We will not make any money with that event. All earned
gains will be invested in you somehow.</li>
<li><strong>50 euros</strong> early bird ticket. <a href="http://symfony.cat/#tickets">Get yours</a> as soon
as possible and join us :)</li>
<li>Take some breath. 7 talks per day, one after another is never a good option.
With 4 talks per day you will be able to enjoy the city and the people.</li>
<li>Eat whatever you want, whenever you need. Your ticket doesn&rsquo;t include food,
but the venue is in front of great placed for having lunch and coffee.</li>
<li>Lighting talks. If you feel that you have something to show us, bring your 8
minutes speech.</li>
</ul>


<p>Of course, and because you&rsquo;re able to buy early bird tickets, we have published
4 of our 8 speakers in our website.</p>

<ul>
<li><a href="https://github.com/matthiasnoback">Matthias Noback</a></li>
<li><a href="https://github.com/acasademont">Albert Casademont</a></li>
<li><a href="https://github.com/weaverryan">Ryan Weaver</a></li>
<li><a href="https://github.com/jmikola">Jeremy Mikola</a></li>
</ul>


<h2>Companies</h2>

<p>Are you a company placed in some part of the world? Do you like Symfony? Then
this may interest you&hellip;</p>

<p>For only 300 euros you will be able to</p>

<ul>
<li>Put your logo everywhere. We will mention you in our media channels at least
once.</li>
<li>You will be able to add whatever you want in our Conference Attendee bag</li>
<li>You will get one free ticket for the conference</li>
<li>We will work very very hard to provide you an stand during the conference.</li>
<li>You will have the satisfaction to be helping the Symfony Environment, a very
important part if you are looking for Symfony developers</li>
</ul>


<p>We really appreciate companies sponsoring, and we strongly think that should
always be that cheaper.</p>

<h2>Communities</h2>

<p>Are you a PHP or Symfony community? Well, you can help us too by spreading the
word. In exchange of that, we will consider you part of our sponsoring group,
adding your logo in our list as well.</p>

<p>And is free!</p>

<p>How can you help us?
Well, for each new sponsor we have because of you, we will give you one free
ticket for the conference. You will be able to raffle this ticket among your
community.</p>

<h2>Join us</h2>

<p>Do you like that? Then&hellip;</p>

<ul>
<li><a href="http://symfony.cat/#tickets">Join Symfony Catalunya now!</a></li>
</ul>


<p>To be aware of our news, follow our Twitter account
(<a href="http://twitter.com/symfonycat">@symfonycat</a>) and say hello :)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/02/09/you-probably-need-bundle-dependencies/">You Probably Need Bundle Dependencies</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-02-09T12:23:00+01:00" pubdate data-updated="true">Feb 9<span>th</span>, 2016</time>
        
         | <a href="/blog/2016/02/09/you-probably-need-bundle-dependencies/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post tries to answer the Magnus Nordlander&rsquo;s
<a href="https://blog.fervo.se/blog/2016/02/07/bundle-deps/">blog post</a>, and to explain
why the <a href="https://github.com/mmoreram/symfony-bundle-dependencies">Symfony Bundle Dependencies</a>
is not just a personal project to fulfill my bundles dependencies, but a
practice we should implement in all our Symfony bundles as well.</p>

<p>Believe me, I had a big post to explain why people really need this bundle, but
I think that you don&rsquo;t need these words, but a simple and real example.</p>

<p>Magnus, you&rsquo;re right. Maybe soft dependencies between bundles could be a good
option, but you know what? You know why Symfony is one of the biggest PHP
projects ever? Because Symfony understands the real user needs, and furthermore,
fulfills them the best way.</p>

<p>Why I tell this? Because your &ldquo;You probably don&rsquo;t need bundle dependencies&rdquo;
should be &ldquo;You <strong>really</strong> need bundle dependencies, but you should work hard to
don&rsquo;t need them anymore&rdquo;.</p>

<p>Remember, software is real, with real developers, real projects and real needs.
We should take it in account as much as we can.</p>

<p>This is my example, from the most used bundle in the world, FOSUserBundle.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;service</span> <span class="na">id=</span><span class="s">&quot;fos_user.user_manager.default&quot;</span> <span class="na">class=</span><span class="s">&quot;FOS\UserBundle\Doctrine\UserManager&quot;</span> <span class="na">public=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;argument</span> <span class="na">type=</span><span class="s">&quot;service&quot;</span> <span class="na">id=</span><span class="s">&quot;security.encoder_factory&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;argument</span> <span class="na">type=</span><span class="s">&quot;service&quot;</span> <span class="na">id=</span><span class="s">&quot;fos_user.util.username_canonicalizer&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;argument</span> <span class="na">type=</span><span class="s">&quot;service&quot;</span> <span class="na">id=</span><span class="s">&quot;fos_user.util.email_canonicalizer&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;argument</span> <span class="na">type=</span><span class="s">&quot;service&quot;</span> <span class="na">id=</span><span class="s">&quot;fos_user.object_manager&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;argument&gt;</span>%fos_user.model.user.class%<span class="nt">&lt;/argument&gt;</span>
</span><span class='line'><span class="nt">&lt;/service&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>I want you to focus on one single line.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;argument</span> <span class="na">type=</span><span class="s">&quot;service&quot;</span> <span class="na">id=</span><span class="s">&quot;security.encoder_factory&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>We can discuss about how good or bad this is, but I really ensure you that you
will find this in the 99,99% of all bundles. So maybe we need to change our mind
and start doing decoupled bundles (not agree in fact, it depends on the case),
but right now, hard bundle dependencies (composer and kernel) is something that
should be covered the best we can.</p>

<p>About your last question, well, your libraries will require some other libraries
and composer will make it happen, with an update and it&rsquo;s autoloader. But your
bundles will probably require dependencies as well, with composer and as well
with a library like that, that will tell the Kernel witch bundle should be
instanced as well to complain services dependencies.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/20/your-packages-dependencies/">Your Packages Dependencies</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-11-20T21:50:00+01:00" pubdate data-updated="true">Nov 20<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/11/20/your-packages-dependencies/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>A component should add as dependency all needed packages to have a complete
functionality</li>
<li>A bundle should add as dependency as well all these bundles that define other
services used in your own service definitions</li>
<li>Take care of your version policy. Being too restrictive reduces the
compatibility with other packages.</li>
</ul>


<h2>Responsibilities</h2>

<ul>
<li>Hi. I&rsquo;m Marc and I am an open source addict</li>
<li>Hi Marc, welcome!</li>
</ul>


<p>That is a reality in fact. I&rsquo;m part of this group of people that consider
themselves addicts to open source. Big part of our work is created to be shared
by everyone, and like Spider-man&rsquo;s uncle said once&hellip; &ldquo;With great power comes
great responsibility&rdquo;.</p>

<p>But what are those responsibilities we should take care of during our
development? What parts of our application should we really take care of and
which are more vulnerable over the time? Testing, documentation, clearness of
our code, abstraction, extension capabilities&hellip; we could talk about them all,
and for sure, each one can have enough material for an entire blog or a book.</p>

<p>In that case, I want to expose my personal experiences about what I learned over
the time by leading an open source project, several small open source bundles
and PHP libraries, and I want to do it by explaining how we should take care of
our Symfony bundles or PHP component dependencies.</p>

<h2>PHP Component Dependencies</h2>

<p>When we talk about PHP components, we talk about framework agnostic packages,
only coupled to the language itself, in that case PHP, and to some other
libraries. Having said that, we could start by trying to understand how the
components and bundles are split in some projects, for example
<a href="http://github.com/symfony/symfony">Symfony</a> or
<a href="http://github.com/elcodi/elcodi">Elcodi</a>. Both projects have components and
bundles, providing the chance to all frameworks to work with their business
logic.</p>

<ul>
<li>So do we place all the business logic in components?</li>
<li>Yes. The <em>why</em> of your project is placed in libraries. This will be your
service layer, and it should be covered with unit tests.</li>
</ul>


<p>In regard to dependencies, components should only have dependencies on other
components. But how can I discover what packages I really depend on? In that
case it&rsquo;s very simple, so we&rsquo;re not working with any kind of magic. Because our
packages are simple PHP classes, checking the usage of all external classes
should be enough to know on which libraries we depend.</p>

<p>In that case, I always write code with <code>use</code> statements, so is much easier to
check my external classes usage. Just by checking the first lines of all my
classes I can guess what packages I should add in my composer.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">namespace</span> <span class="nx">Elcodi\Component\User\EventListener</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">use</span> <span class="nx">Symfony\Component\Security\Core\Event\AuthenticationEvent</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="nx">Doctrine\Common\Persistence\ObjectManager</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="nx">Elcodi\Component\Cart\Entity\Interfaces\CartInterface</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="nx">Elcodi\Component\Cart\Wrapper\CartWrapper</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="nx">Elcodi\Component\User\Entity\Interfaces\CustomerInterface</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * Class UpdateCartWithUserListener</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">class</span> <span class="nc">UpdateCartWithUserListener</span>
</span></code></pre></td></tr></table></div></figure>


<p>This piece of code makes you depend on four packages at least. Please, don&rsquo;t
focus on the versions, but only on the libraries.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&quot;symfony/security&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;doctrine/common&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;elcodi/cart&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;elcodi/user&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Dependencies of Dependencies</h3>

<p>Your package must manage ALL of its dependencies, even if they are as well
dependencies of your dependencies.</p>

<ul>
<li>Your package A uses B and C.</li>
<li>Your package A requires B.</li>
<li>Package B requires C.</li>
<li>Then, your package A has both B and C. Enough.</li>
</ul>


<p>Well, that&rsquo;s not true at all, because you cannot depend never of the
dependencies of your dependencies. Maybe now they require a package, but maybe
this package won&rsquo;t be required by your dependency anymore in the future. In that
case, even if you still need it, your package will disappear from your vendor
folder.</p>

<ul>
<li>Your package A uses B and C.</li>
<li>Your package A requires B and C.</li>
<li>Package B requires C.</li>
<li>Then, your package A has both B and C.</li>
<li>Package B does not require C anymore.</li>
<li>You still have B and C.</li>
</ul>


<p>Remember that&hellip; Require <strong>ALL</strong> your dependencies. All of them! That can make
the difference.</p>

<h3>Adapters</h3>

<p>If our application is super decoupled from other libraries, and you have used
adapters for those integrations, then things change. Because the use of adapters
allows you to decouple from other packages literally, we should find another
mechanism to say&hellip; <em>hey, maybe you can depend on this package&hellip;</em>. Composer
proposes that mechanism, by using the <code>suggest</code> section.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;suggest&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;some/package&quot;</span><span class="p">:</span> <span class="s2">&quot;Use ^2.5 for integration with Some Package&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Of course, this is not the only way of doing that. In this example we assume
that our package will offer all the adapters implementing an interface, and this
is just an option. In my case, I&rsquo;ve been working for so long with a library
called <a href="https://github.com/KnpLabs/Gaufrette">Gaufrette</a>, and I really enjoy the
way these kind of packages work.</p>

<blockquote><p>Some of you could say&hellip; oh, but by doing that, then you&rsquo;re not defining
dependencies but only suggestions (sounds the same as saying nothing, in
fact), but when we define a requirement is when our package cannot exist
without this package. When it is a MUST.</p></blockquote>

<p>Other kind of implementations don&rsquo;t take into account the possibility of using the
<code>suggest</code> section in composer, because they don&rsquo;t really solve the dependencies
problem. This implementation forces having 1+<code>n</code> packages, the first one
containing the interface and the common content, and the other <code>n</code> containing
each specific implementation, all of them requiring the first one as a
dependency and the specific third-party package.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;myself/core&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;some/package&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.5 &quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is much more heavy to maintain, and only works if you only offer one port
with <code>n</code> adapters in your package. In the case of Gaufrette, this could be a
reality, so they only offer one port with <code>n</code> adapters, but of course, having
this structure is more difficult to maintain.</p>

<h3>Versions</h3>

<p>That is a very complex topic. I will not talk about composer, but firstly, I
will share some basic concepts that are used a lot when defining dependencies
between packages.</p>

<ul>
<li><code>~2.5.4</code> means equal and bigger than <code>2.5.4</code> but smaller than <code>2.6</code></li>
<li><code>~2.5</code> means equal and bigger than <code>2.5.0</code> but smaller than <code>3.0.0</code></li>
<li><code>^2.5.4</code> means equal and bigger than <code>2.5.4</code> but smaller than <code>3.0.0</code></li>
<li><code>^2.5</code> means equal and bigger than <code>2.5.0</code> but smaller than <code>3.0.0</code></li>
</ul>


<p>The only thing I can say about that is that if your library aims to be usable by
a biggest community as possible, then please consider checking your dependencies
deeply, offering as much version-compatibility as possible.</p>

<p>The following composer requirements&hellip;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;5.4.2&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&quot;symfony/security&quot;</span><span class="p">:</span> <span class="s2">&quot;~2.7.3&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;doctrine/common&quot;</span><span class="p">:</span> <span class="s2">&quot;~2.7.3&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;elcodi/cart&quot;</span><span class="p">:</span> <span class="s2">&quot;~1.0.4&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;elcodi/user&quot;</span><span class="p">:</span> <span class="s2">&quot;~1.0.4&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>are more restrictive than the following ones&hellip;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;^5.3.9&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&quot;symfony/security&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.3&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;doctrine/common&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.3&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;elcodi/cart&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;elcodi/user&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.0&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Of course, you should add requirement compliance as long as they really cover
your library needs. If you use Traits, then you should use <code>^5.4</code>, or if you&rsquo;re
using some Symfony features introduced in a specific version, then you become
dependent, at least, on this version</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;^5.4&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&quot;symfony/security&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.7&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;doctrine/common&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.3&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;elcodi/cart&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;elcodi/user&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.0&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Consider as well the compatibility with new major versions, as soon as they
confirm their roadmap strategy and feature list. In that case, we could add
compatibility with Symfony <code>^3.0</code> if we have removed all deprecated elements
from old versions, or PHP <code>^7.0</code> if we don&rsquo;t use any <code>^5.6</code> deprecated function.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;^5.4|^7.0&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&quot;symfony/security&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.7|^3.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;doctrine/common&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.3|^3.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;elcodi/cart&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;elcodi/user&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.0&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is very important, because if you don&rsquo;t offer this kind of compatibility,
no one using your package will be able to evolve properly, and when I mean
someone using your package I mean anyone using any package that, recursively,
uses your package.</p>

<p>That can be tons of projects.</p>

<h2>Symfony bundle dependencies</h2>

<p>Once we have talked about PHP components, let&rsquo;s talk about Symfony bundles. This
is something much more complicated, because a Symfony Bundle is a PHP library
that is co-existing in a framework, so it is not as easy to check all our PHP
class dependencies.</p>

<p>The question we must ask ourselves when trying to resolve any Symfony bundle
dependency map is&hellip; <em>What do I really need to make this bundle work in any
Symfony project?</em></p>

<h3>Other bundles</h3>

<p>This is one of the things Symfony doesn&rsquo;t solve yet. How can a bundle depend on
another bundle, but not only in the composer layer but as well in the
application layer?</p>

<p>Well, there is a package for that (remember to <strong>star</strong> it if turns out useful
for you).</p>

<p><a href="https://github.com/mmoreram/symfony-bundle-dependencies">Symfony Bundle Dependencies</a></p>

<p>This package allows you to create bundles with other bundle dependencies very
easily. By using this package you will be able to say&hellip; <em>okay composer,
download this bundles, I need them to instantiate my bundle&hellip; and Symfony
application, as soon you instantiate my bundle, please, install these other
bundles as well before</em> without any need to modify the kernel. Of course, this
is only possible if the project works with that package as well.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">use</span> <span class="nx">Mmoreram\SymfonyBundleDependencies\DependentBundleInterface</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * My Bundle</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">class</span> <span class="nc">MyBundle</span> <span class="k">implements</span> <span class="nx">DependentBundleInterface</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Create instance of current bundle, and return dependent bundle namespaces</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @return array Bundle instances</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">getBundleDependencies</span><span class="p">(</span><span class="nx">KernelInterface</span> <span class="nv">$kernel</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">[</span>
</span><span class='line'>            <span class="s1">&#39;Another\Bundle\AnotherBundle&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s1">&#39;My\Great\Bundle\MyGreatBundle&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="k">new</span> <span class="nx">\Yet\Another\Bundle\YetAnotherBundle</span><span class="p">(</span><span class="nv">$kernel</span><span class="p">),</span>
</span><span class='line'>            <span class="k">new</span> <span class="nx">\Even\Another\Bundle\EvenAnotherBundle</span><span class="p">(</span><span class="nv">$kernel</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
</span><span class='line'>        <span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If the project is not using this package, then the behavior of your bundle won&rsquo;t
change at all.</p>

<h3>DIC Services</h3>

<p>To resolve all your bundle dependencies you need to take a look as well at your
Dependency Injection definition. Let&rsquo;s imagine we have a bundle with this
DIC definition.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">services</span><span class="p-Indicator">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="l-Scalar-Plain">my_service</span><span class="p-Indicator">:</span>
</span><span class='line'>        <span class="l-Scalar-Plain">class</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">My\Service\Class</span>
</span><span class='line'>        <span class="l-Scalar-Plain">arguments</span><span class="p-Indicator">:</span>
</span><span class='line'>            <span class="p-Indicator">-</span> <span class="err">@</span><span class="l-Scalar-Plain">twig</span>
</span><span class='line'>            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">my_other_service</span>
</span><span class='line'>            <span class="p-Indicator">-</span> <span class="err">@</span><span class="l-Scalar-Plain">event_dispatcher</span>
</span></code></pre></td></tr></table></div></figure>


<p>When Symfony tries to resolve this file, it needs as well all the definitions
of the arguments (dependencies). The bundles that have these definitions
automatically become your bundle dependencies.</p>

<p>The hard work here is to know which bundles have all these service definitions,
and that is not always that simple. In that case, for example&hellip; Which package
has the <code>@twig</code> service? We could think easily&hellip; well, <code>twig/twig</code> for sure has
the class we are injecting here.</p>

<p>And you&rsquo;re right, so if any of your classes, in that case <code>My\Service\Class</code>
needs a class from the package <code>twig/twig</code>, this package will have to be
required by your bundle.</p>

<p>But is that the real answer we need right now? Not at all. The question is not
which package provides me with the Twig class, but with the <code>@twig</code> service, and
this one is not <code>twig\twig</code> as this is only a PHP library, framework agnostic.</p>

<p>For this reason, we have a bundle called
<a href="http://github.com/symfony/TwigBundle">TwigBundle</a>. This bundle, as well as
other needed things, creates a new service called <code>twig</code>. This Bundle is
required not only because we need the code under our vendor folder, but also
because it has to be instantiated when our bundle is instantiated.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;symfony/twig-bundle&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.7&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you decide to work with the symfony bundle dependency package, then this code
is for you.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">use</span> <span class="nx">Mmoreram\SymfonyBundleDependencies\DependentBundleInterface</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * My Bundle</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">class</span> <span class="nc">MyBundle</span> <span class="k">implements</span> <span class="nx">DependentBundleInterface</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Create instance of current bundle, and return dependent bundle namespaces</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @return array Bundle instances</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">getBundleDependencies</span><span class="p">(</span><span class="nx">KernelInterface</span> <span class="nv">$kernel</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">[</span>
</span><span class='line'>            <span class="s1">&#39;Symfony\Bundle\TwigBundle\TwigBundle&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you don&rsquo;t use this package, then you should add the TwigBundle instance in
your AppKernel.</p>

<h3>Requiring the Framework</h3>

<p>How about this services file? What dependencies do you think your package has?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">services</span><span class="p-Indicator">:</span>
</span><span class='line'>
</span><span class='line'>    <span class="l-Scalar-Plain">my_service</span><span class="p-Indicator">:</span>
</span><span class='line'>        <span class="l-Scalar-Plain">class</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">My\Service\Class</span>
</span><span class='line'>        <span class="l-Scalar-Plain">arguments</span><span class="p-Indicator">:</span>
</span><span class='line'>            <span class="p-Indicator">-</span> <span class="err">@</span><span class="l-Scalar-Plain">event_dispatcher</span>
</span></code></pre></td></tr></table></div></figure>


<p>Some people can say if quickly&hellip; the EventDispatcher is a requirement&hellip; but we
have the same problem as before. The Event Dispatcher is a Symfony component,
and has nothing to do with the exposure of their classes in the Symfony
Framework dependency injection definition.</p>

<p>Symfony provides as well a bundle called
<a href="https://github.com/symfony/framework-bundle">FrameworkBundle</a>. Its mission is,
in addition to creating all the working environment for your project (the
framework itself), to expose all needed services to the DIC. One of them is the
Event Dispatcher from the component (if you check the composer.json file of that
bundle you will discover that the symfony/event-dispatcher package is a
requirement).</p>

<p>So, some of your bundle services should require as well this bundle.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;symfony/framework-bundle&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.7|^3.0&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This bundle is almost always required by all bundles (at least, it should), so
make sure you&rsquo;re really tolerant with its version, or you will make your
bundle less usable than it could be.</p>

<h3>Symfony ^3.0.0</h3>

<p>Many packages are actually requiring a very restrictive version of Symfony. This
fact has not been a problem during the latest 4 years, but nowadays Symfony
<code>v3.0.0</code> is going to be a reality soon, so all these packages need to make two
easy things</p>

<ul>
<li>Check if your bundle introduces a Symfony <code>~2.8</code> deprecated feature.</li>
<li>If it does, update your bundle to avoid this deprecation</li>
<li>Update your requirements to work as well with Symfony <code>^3.0</code>.</li>
</ul>


<p>Check that your Symfony requirements then are still valid. For example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;symfony/framework-bundle&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.2|^3.0&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Applying this new requirement with Symfony <code>^3.0</code> maybe you had to use a new
feature that was introduced in Symfony <code>^2.7.3</code>. In that case, your
composer.json is invalid, and if you have covered your class with tests and you
run your tests with <code>--prefer-lowest</code>, then you will have some fails there.</p>

<p>You will have to update your dependency properly.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;symfony/framework-bundle&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.7.3|^3.0&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Development Dependencies</h2>

<p>As you may already noticed, development dependencies are not loaded recursively.
This means that the <code>require-dev</code> block of your <code>require-dev</code> packages is
completely ignored.</p>

<p>In some way, this is great because you can define specifically what packages you
need for your development (testing, mostly), without being worried about all the
packages that require you.</p>

<p>In some other way, this can be bad&hellip; well, yes, you must know exactly all your
dependencies for testing (there should be only a few&hellip;), so in that case, just
make sure you know your application :)</p>

<h3>Requiring PHPUnit</h3>

<p>And then the question is&hellip; should I require PHPUnit or other testing libraries,
as well as lints and formatters?</p>

<p>Again, some people will tell you&hellip; don&rsquo;t do that! Your development and testing
deployment will require more disk and more resources for composer. Well, sure,
but if you depend on the pre-installed PHPUnit version, then you can have some
trouble when testing.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require-dev&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;fabpot/php-cs-fixer&quot;</span><span class="p">:</span> <span class="s2">&quot;1.4.2&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;mmoreram/php-formatter&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;phpunit/phpunit&quot;</span><span class="p">:</span> <span class="s2">&quot;4.5.0&quot;</span>
</span><span class='line'><span class="p">}</span><span class="err">,</span>
</span></code></pre></td></tr></table></div></figure>


<p>I really need these versions. No others but these. For example, some lints can
add some logic, or even change it. Because we&rsquo;re responsible for our bundles,
components or code, we should trust as less as possible in what other people can
do to our dependencies (somehow we really trust a lot of packages by adding the
<code>^2.2</code> symbol, but in that case we do it not for us but for our users). In
testing mode, and because fortunately <code>require-dev</code> block is not recursive, we
can perfectly be restrictive with the version we want, and as long as we
want/need to change it&hellip; just do it :)</p>

<h2>Trust</h2>

<p>Trusting open source is something you cannot do blindly. Your project is your
business, and you need to know that is safe from third party version errors and
issues.</p>

<p>If you trust a package, like I do for example in Symfony, then use the
semantic version notation in your requirements. Believe that the community will
never allow back compatibilities breaks, or they will fix them all as soon as
possible when introduced.</p>

<p>If you trust a library because it is tested, but you don&rsquo;t trust their
version policy, then just block the version (knowing that this restricts the
compatibility with other packages), or make some push to this community for a
really semantic version policy.</p>

<p>If you don&rsquo;t trust a library at all, then don&rsquo;t use it. That simple.</p>

<h2>Conclusion</h2>

<p>So, that&rsquo;s it.</p>

<p>I highly recommend you, open source lover, to take as much care as possible of
your package dependencies. A healthy and useful package is a package used by
tons of people. Offer them some confidence and you will get a lot of feedback in
return.</p>

<p>Share your work as much as you can, and don&rsquo;t be afraid of your errors, they
will be your biggest reasons for being a better developer day after day, and
remember that all of us were inexperienced once.</p>

<p><em>Error is first step to success</em></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/28/composer-install-in-ci/">Composer Install in CI</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-09-28T16:53:00+02:00" pubdate data-updated="true">Sep 28<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/09/28/composer-install-in-ci/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you have a project with a lot of dependencies, then you might now what I am
talking about. We all love composer, but we all know as well that, at least with
current PHP versions, some composer.json are very heavy to compute and fulfill.
All this problems are reduced to time, and some CI engines, like Travis, only
allow a finite number of seconds (in Travis case, 20 minutes).</p>

<p>That&rsquo;s too much!</p>

<p>I found a solution (at least, I thought), but some days ago I saw that was not a
solution at all, but a workaround that only sometimes works properly. I will
explain exactly what&rsquo;s the point here.</p>

<h3>The problem</h3>

<p>My <code>composer.json</code> is very big and composer needs too much time to compute all
the dependencies. Reducing dependencies is not an option at all, so the only way
of reducing dependencies is by doing some refactoring.</p>

<p>Any final project needs a lot of dependencies, and even if your <code>composer.json</code>
file is small, you may need a dependency with a lot of dependencies.</p>

<h3>My solution (the bad one&hellip;)</h3>

<p>This solution is only wrong if you want to test your application under several
PHP versions. That&rsquo;s my case and could be yours&hellip;</p>

<p>Well. Computing the real dependencies in my environment seems a great solution,
right? I run <code>composer update</code> in my computer, I update the <code>composer.lock</code>
version in the repository, and then I only need to do <code>composer install</code>. What
I reduce here is the computing time of all recursive dependencies from 20+
minutes to less than 5 minutes.</p>

<p>That&rsquo;s great!</p>

<h3>Why this is a bad solution?</h3>

<p>Some projects have decided to increase the minimum PHP dependency only
increasing the minor version of the package (and is not wrong, is not BC break).
If your project believes in Semantic Version (semver), is usual to find these
pieces of composer blocks</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;5.4&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;symfony/symfony&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.7&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;doctrine/orm&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.5&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;some/package&quot;</span><span class="p">:</span> <span class="s2">&quot;^1.3&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If my development environment uses PHP 5.5, then I will be able to work with
this composer requirements. Great. We update our dependencies, we update our
repository with the <code>composer.lock</code> file, and everything should work as
expected.</p>

<p>The problem here is that there is an scenario that we are not considering here,
and is that for sure, our <code>composer.lock</code> is the result of computing the
<code>composer.json</code> file in PHP 5.5, but this doesn&rsquo;t mean that same dependencies
will work as well in PHP 5.4.</p>

<p>Let&rsquo;s see the <code>some/package</code> composer definition in version 1.3.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;5.4&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;whatever/whatever&quot;</span><span class="p">:</span> <span class="err">*</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And then, let&rsquo;s see the same composer file in version 1.4.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;5.5&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;whatever/whatever&quot;</span><span class="p">:</span> <span class="err">*</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>As long as we create the <code>composer.lock</code> file in our development environment
(remember, with PHP 5.5), we will use version 1.4 of package <code>some/package</code>, but
this package version is not compatible with PHP 5.4.</p>

<p>What will happens is that, when we do <code>composer install</code> in your CI, composer
will throw an Exception. And that&rsquo;s always bad news.</p>

<h3>The good solution</h3>

<p>There&rsquo;s no good solution at all. In fact, there are only partial solutions, for
example generating the <code>composer.lock</code> file with the highest PHP version
allowed, but then, if you work with a dependency that forces a PHP version in
each version, this won&rsquo;t work at all.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;5.4&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;whatever/whatever&quot;</span><span class="p">:</span> <span class="err">*</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So, the only way of doing that is by using <code>composer update</code> in your CI
platform. The good point is that you <strong>must</strong> take care of your <code>composer.json</code>
file&hellip;</p>

<h3>For libraries</h3>

<p>If you work with a library, then use the biggest dependency scope. This will
allow more users to use your library. Of course, you will increase the final
time of composer computation time, but is not your problem at all.</p>

<p>Of course, library composer dependencies should be as small as possible.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;&gt;5.4&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;whatever/whatever&quot;</span><span class="p">:</span> <span class="err">*</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>For final projects</h3>

<p>Final projects have the responsibility of reducing that scope, only allowing
explicitly highest versions. Of course, final projects can host big composer
structures (at least it&rsquo;s not a bad practice&hellip;), so in that case you will have
to work harder to reduce that file.</p>

<p>The problem here is not a problem at all, so it has no sense to test your final
application under several PHP versions, at least in your CI platform. Just test
it under your current PHP version, right?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="s2">&quot;require&quot;</span><span class="err">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;php&quot;</span><span class="p">:</span> <span class="s2">&quot;5.5&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;whatever/whatever&quot;</span><span class="p">:</span> <span class="err">^</span><span class="mf">1.5</span><span class="err">.</span><span class="mi">4</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/14/symfony-ug-be-our-friend/">Symfony UG, Be Our Friend</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-09-14T10:57:00+02:00" pubdate data-updated="true">Sep 14<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/09/14/symfony-ug-be-our-friend/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Symfony Barcelona UG have been looking some sponsors for a while, and we have
had a great response from the community. We are so proud and happy about that.</p>

<p>As a User Group, we want to be a community group for all the community, so from
today, you can be our UG friend :)</p>

<p>If you are a Symfony UG around the world and you want to be part of it, very
easy. Just send an email to
<a href="symfonybarcelona@gmail.com">symfonybarcelona@gmail.com</a> or just a simple tweet
with <a href="http://twitter.com/symfony_bcn">@symfony_bcn</a>. We will add your logo in
our website and you will appear in our next event.</p>

<p>Then, we will be friends :)</p>

<p>Please, share this post on your social networks, and help us making a better
world with tons of tiny and cute cats :)</p>

<p>Have a nice week!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/07/symfony-barcelona-event-september-2015/">Symfony Barcelona Event, September 2015</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-09-07T21:38:00+02:00" pubdate data-updated="true">Sep 7<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/09/07/symfony-barcelona-event-september-2015/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It is a pleasure for me to announce that next September 22nd we will have a
great event in Barcelona. I&rsquo;ve talked many times about this local organization,
but this time is pretty different. I&rsquo;ll explain you.</p>

<p>This year Barcelona hosts the
<a href="https://events.drupal.org/barcelona2015">DrupalCon Europe 2015</a>, and this is
super exciting. Many people from around the world will visit our great and
amazing streets and will attend to a great and big event, related with Drupal,
Symfony and other interesting topics, always, related to the Drupal world.</p>

<p>This is very interesting from the point of view of Symfony, because as you may
know, new version of drupal, Drupal8, is build using some Symfony components.
This is one of the examples I refer when I talk about sharing technologies
between PHP projects and when I talk about open source, community and other
related topics. We&rsquo;ve seen these synergies between other PHP projects and
Symfony as well with Laravel, eZ Publish, Magento and Joomla (and many more,
indeed)</p>

<p>So, this is a call to all the community coming to Barcelona next September 21st.
We will host Fabien Potencier, the creator of Symfony, and Lukas Kahwe Smith, an
amazing and super active PHP developer, member, for example, of the PHP-FIG
group.</p>

<p><a href="http://symfony-barcelona.es">http://symfony-barcelona.es</a></p>

<p>Isn&rsquo;t it interesting? Indeed, but this is not all!</p>

<p>We are planning to overcome our last assistance record, which is 140 attendees.
This time, we want to fill an auditorium of 600 seats and show you what really
is Barcelona, and how amazing can be :)</p>

<p>Our sponsors are ready<br/>
The community is ready<br/>
The organization is ready<br/>
Only one thing is missing here&hellip;</p>

<p><strong>You!</strong></p>

<p><a href="http://symfony-barcelona.es#register">Join us now for free!</a> and please share
this post to allow everyone to know about it!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/28/eventlisteners-as-collectors-in-symfony/">EventListeners as Collectors in Symfony</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-08-28T12:04:00+02:00" pubdate data-updated="true">Aug 28<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/08/28/eventlisteners-as-collectors-in-symfony/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Some of my concerns during the last couple of years have been how to collect
data from all installed bundles using available tools in Symfony packages.
I say concerns because I don&rsquo;t really know if is there a tool for that.</p>

<p>Some people have told me that the
<a href="http://symfony.com/doc/current/components/event_dispatcher/introduction.html">EventDispatcher component</a>
can do this work greatly, but then I have the same question once and again&hellip; is
this component designed for such?</p>

<p>Let&rsquo;s review some tiny concepts here.</p>

<h2>Event immutability</h2>

<p>Try to think what really is an event. Something that happens. For example, I
wake up. Once I wake up, an event is dispatched called <code>mmoreram.wake_up</code>. This
event, of course, is immutable. Nothing can change the fact that I woke up, so
the event should be treated as an immutable object, with only reading actions.</p>

<p>One single property of the event is injected once is created. Did I wake up
rested enough for a new crazy day with all cool guys from my office?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">namespace</span> <span class="nx">Mmoreram</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">use</span> <span class="nx">Symfony\Component\EventDispatcher\Event</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * Marc woke up event</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">class</span> <span class="nc">MmoreramWakeUpEvent</span> <span class="k">extends</span> <span class="nx">Event</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * @var boolean</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * Marc woke up rested</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">private</span> <span class="nv">$rested</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Construct method</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @var boolean $rested Marc woke up rested</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$rested</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rested</span> <span class="o">=</span> <span class="nv">$rested</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Get if Marc is rested enough</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @return boolean Marc is rested enough</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">isRested</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rested</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Of course, no one should be able to change the value of rested, because no one
has the <strong>power</strong> to change the fact I woke up tired this night.</p>

<p>The main intention of an event is notify the world that something just happened,
so any extra implementation changing this paradigm should be avoided in order to
not corrupt the real meaning of the component.</p>

<p>Said that, and before continuing with the post&hellip; a question related to this
topic. Just make sure that you can take some time to think about that.</p>

<p>If we talk about decoupling between components&hellip; is the concept of <code>priority</code>
helpful? If any actor must know the priorities of all listeners in order to know
its own&hellip; then can we consider that all event listeners are really decoupled
between them? And how bad is that?</p>

<h2>Collector</h2>

<p>Let&rsquo;s figure out that the system need to collect some feelings when I wake up.
Let&rsquo;s figure out as well that we don&rsquo;t really care about how these feelings are
sorted, so the problem of priority is not a problem anymore: we can ignore it
completely.</p>

<p>We can change our event with this new implementation.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">namespace</span> <span class="nx">Mmoreram</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">use</span> <span class="nx">Symfony\Component\EventDispatcher\Event</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="nx">Mmoreram\Feeling</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * Marc woke up event</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">class</span> <span class="nc">MmoreramWakeUpEvent</span> <span class="k">extends</span> <span class="nx">Event</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * @var boolean</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * Marc woke up rested</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">private</span> <span class="nv">$rested</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * @var Feeling[]</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * Array of feelings</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">private</span> <span class="nv">$feelings</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Construct method</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @var boolean $rested Marc woke up rested</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$rested</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rested</span> <span class="o">=</span> <span class="nv">$rested</span><span class="p">;</span>
</span><span class='line'>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">feelings</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Add new feeling</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @param Feeling $feeling New feeling to be added</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @return $this Self object</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">addFeeling</span><span class="p">(</span><span class="nx">Feeling</span> <span class="nv">$feeling</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">feelings</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$feeling</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Get if Marc is rested enough</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @return boolean Marc is rested enough</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">isRested</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rested</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Get all feelings</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @return Feeling[] Set of feelings</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getFeelings</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">feelings</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Of course, in our domain we must dispatch this event one I really wake up (for
example a service called <code>MmoreramVitalActions</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">use</span> <span class="nx">Symfony\Component\EventDispatcher\EventDispatcher</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="nx">Symfony\Component\EventDispatcher\Event</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="nx">Mmoreram\MmoreramWakeUpEvent</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * Marc vital actions</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">class</span> <span class="nc">MmoreramVitalActions</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Marc wakes up</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @return Feeling[] Set of feelings resulting of the action of waking up</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">wakeUp</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="nv">$rested</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">didMarcRestedProperly</span><span class="p">();</span>
</span><span class='line'>        <span class="nv">$eventDispatcher</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventDispatcher</span><span class="p">();</span>
</span><span class='line'>        <span class="nv">$event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MmoreramWakeUpEvent</span><span class="p">(</span><span class="nv">$rested</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="nv">$dispatcher</span>
</span><span class='line'>            <span class="o">-&gt;</span><span class="na">dispatch</span><span class="p">(</span>
</span><span class='line'>                <span class="s1">&#39;mmoreram.wake_up&#39;</span><span class="p">,</span>
</span><span class='line'>                <span class="nv">$event</span>
</span><span class='line'>            <span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getFeelings</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Get if Marc rested properly</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @return boolean Marc rested properly</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">private</span> <span class="k">function</span> <span class="nf">didMarcRestedProperly</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see, after dispatching the event you should be able to get all
collected feelings. This means that the one in charge to fulfill this
information related to my feelings should be any event listener interested in
adding it&rsquo;s own related feeling.</p>

<p>For example, an Event Listener will have the responsibility to add a feeling
related to the temperature of my room.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">use</span> <span class="nx">Mmoreram\MmoreramWakeUpEvent</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd"> * Marc wake up event listener related to temperature.</span>
</span><span class='line'><span class="sd"> * This class is intended to add a feeling depending on local temperature</span>
</span><span class='line'><span class="sd"> */</span>
</span><span class='line'><span class="k">class</span> <span class="nc">TemperatureMmoreramWakeUpEventListener</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Marc wakes up listener</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @param MmoreramWakeUpEvent $event Marc wake up event</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @return $this Self object</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">addTemperatureFeeling</span><span class="p">(</span><span class="nx">MmoreramWakeUpEvent</span> <span class="nv">$event</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="nv">$feeling</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getTemperatureFeeling</span><span class="p">();</span>
</span><span class='line'>        <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">addFeeling</span><span class="p">(</span><span class="nv">$feeling</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">/**</span>
</span><span class='line'><span class="sd">     * Get feeling related to the temperature</span>
</span><span class='line'><span class="sd">     *</span>
</span><span class='line'><span class="sd">     * @return Feeling Feeling related to temperature</span>
</span><span class='line'><span class="sd">     */</span>
</span><span class='line'>    <span class="k">private</span> <span class="k">function</span> <span class="nf">getTemperatureFeeling</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Of course, you must add this event listener using tags in the Dependency
Injection Symfony configuration.</p>

<p><a href="http://symfony.com/doc/current/reference/dic_tags.html">Using tags for our listeners definition</a></p>

<p>At this point, you can see that maybe this is useful. This is a very easy and
fast collector implementation, but not enough good. The event is not immutable
anymore and you can change if from any event dispatcher, very far from the real
intention of the component.</p>

<h2>Solution</h2>

<p>I am using this approach in order to be as much pragmatic as possible. Of course
this works properly by adding an extra definition and documentation layer, but
I wonder if other people is concerned about that in Symfony.</p>

<p>I don&rsquo;t really think that yet another component called Collector would be
necessary at all unless there is an abstraction between both components (they
share some common things related to the fact of broadcasting and subscribing).</p>

<p>Of course, again, simple theory and personal thoughts brought to the community.
I will continue using this approach even knowing that should be solved using
another one as long as people understand it and is easy to work with.</p>

<p>Feedback and people thoughts will be appreciated, as always :)</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/02/16/bldd-a-dd-to-dominate-them-all/">BLDD, a DD to dominate them all</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/02/04/el-peligro-de-hablar-espanol-en-catalunya/">El peligro de hablar español en Catalunya</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/26/bldd-un-dd-para-dominarlos-a-todos/">BLDD, un DD para dominarlos a todos</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/03/symfony-catalunya/">Symfony Catalunya</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/09/you-probably-need-bundle-dependencies/">you probably need bundle dependencies</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/mmoreram">@mmoreram</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mmoreram',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

      </div>
    </div>
    <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Marc Morera -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a>.</span>
</p>

</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'mmoreram';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </div>
</body>
</html>
